(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{535:function(s,a,n){"use strict";n.r(a);var e=n(3),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("Boxx"),s._v(" "),n("h3",{attrs:{id:"go-access安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#go-access安装"}},[s._v("#")]),s._v(" go-access安装")]),s._v(" "),n("p",[n("a",{attrs:{href:"http://goaccess.io/download",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网地址"),n("OutboundLink")],1)]),s._v(" "),n("ol",[n("li",[s._v("wget https://tar.goaccess.io/goaccess-1.4.tar.gz")]),s._v(" "),n("li",[s._v("tar -xzvf goaccess-1.4.tar.gz")]),s._v(" "),n("li",[s._v("cd goaccess-1.4/")]),s._v(" "),n("li",[s._v("./configure --enable-utf8 --enable-geoip=legacy")]),s._v(" "),n("li",[s._v("make")]),s._v(" "),n("li",[s._v("make install")])]),s._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"title"}),n("p",[s._v("第4步的时候可能会报错\nchecking for GeoIP_new in -lGeoIP... no\nconfigure: error:\n*** Missing development files for the GeoIP library")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("此时需要安装依赖\nyum install GeoIP-devel\n或者安装全部依赖\nyum install glib2 glib2-devel GeoIP-devel  ncurses-devel zlib zlib-devel\n")])])])]),n("p",[s._v("安装完成 默认地址在 "),n("code",[s._v("/usr/local/etc/goaccess.conf")]),s._v("\n对配置文件做一些主要配置：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(' time-format %H:%M:%S\n date-format %d/%b/%Y\n log-format %h %^[%d:%t %^] "%r" %s %b "%R" "%u"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("其中，log-format 与 access.log 的 log_format 格式对应，每个参数以空格或者制表符分割。参数说明如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(" %t  匹配time-format格式的时间字段\n %d  匹配date-format格式的日期字段\n %h  host(客户端ip地址，包括ipv4和ipv6)\n %r  来自客户端的请求行\n %m  请求的方法\n %U  URL路径\n %H  请求协议\n %s  服务器响应的状态码\n %b  服务器返回的内容大小\n %R  HTTP请求头的referer字段\n %u  用户代理的HTTP请求报头\n %D  请求所花费的时间，单位微秒\n %T  请求所花费的时间，单位秒\n %^  忽略这一字段\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("启动html模式 -实时记录模式")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('LANG="zh_CN.UTF-8" bash -c "goaccess -a -d -f /usr/local/nginx1.9/nginx-1.9.9/logs/access/access.log -p /usr/local/etc/goaccess/goaccess.conf -o /usr/local/nginx1.9/nginx-1.9.9/accesshtml/index.html --real-time-html --daemonize" \n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("定时统计模式")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('LANG="zh_CN.UTF-8" bash -c "0 0 * * * ? * goaccess -a -d -f /usr/local/nginx1.9/nginx-1.9.9/logs/access/access.log -p /usr/local/etc/goaccess/goaccess.conf -o /usr/local/nginx1.9/nginx-1.9.9/accesshtml/index.html --real-time-html --daemonize" \n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"配置nginx-访问"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置nginx-访问"}},[s._v("#")]),s._v(" 配置nginx 访问")]),s._v(" "),n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7891")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v(" localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("      \n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.9")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".9")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("accesshtml"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("重启nginx 访问服务地址+7891 即可访问")]),s._v(" "),n("h3",{attrs:{id:"关闭后台执行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关闭后台执行"}},[s._v("#")]),s._v(" 关闭后台执行")]),s._v(" "),n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[s._v("ps "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ef "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" grep goaccess\nkill xxxx   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#直接杀掉相应的进程即可")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"清理日志数据，goaccess重新统计"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#清理日志数据，goaccess重新统计"}},[s._v("#")]),s._v(" 清理日志数据，GoAccess重新统计")]),s._v(" "),n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[s._v("cd "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入nginx日志存放位置")]),s._v("\nrm access"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除日志文件")]),s._v("\nrm error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除日志文件")]),s._v("\ntouch access"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#新建日志文件")]),s._v("\ntouch error "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#新建日志文件")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])],1)}),[],!1,null,null,null);a.default=t.exports}}]);