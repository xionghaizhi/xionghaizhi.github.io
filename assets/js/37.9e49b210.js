(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{547:function(s,t,e){"use strict";e.r(t);var a=e(3),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("Boxx"),s._v(" "),e("h3",{attrs:{id:"一、git-commit撤回"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、git-commit撤回"}},[s._v("#")]),s._v(" 一、git commit撤回")]),s._v(" "),e("p",[s._v("此时代码只是commit到了本地，还没有push到远程仓库，撤销方式如下")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --soft HEAD^\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("个人理解此命令的意思是撤销到上一个版本 "),e("code",[s._v("HEAD^")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --soft HEAD~1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("个人理解此命令的意思也是是撤销到上一个版本 "),e("code",[s._v("HEAD~1")]),s._v("，但是如果写成"),e("code",[s._v("HEAD~2")]),s._v("就是撤销上两个版本。比第一种灵活一点。"),e("br"),s._v("\n其次要注意：")]),s._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"title"}),e("p",[s._v("两个命令仅仅是撤回commit操作，你写的代码依然保留，你可以修改后再次commit提交。")])]),e("p",[s._v("剩余几个参数："),e("br"),s._v("\n--mixed\n意思是：不删除工作空间改动代码，撤销commit，并且撤销git add . 操作\n这个为默认参数,git reset --mixed HEAD^ 和 git reset HEAD^ 效果是一样的。"),e("br"),s._v("\n--soft"),e("br"),s._v("\n不删除工作空间改动代码，撤销commit，不撤销git add ."),e("br"),s._v("\n--hard\n删除工作空间改动代码，撤销commit，撤销git add ."),e("br"),s._v("\n注意完成这个操作后，就恢复到了上一次的commit状态。"),e("br"),s._v("\n顺便说一下，如果commit注释写错了，只是想改一下注释，只需要：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit --amend  \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("此时会进入默认vim编辑器，修改注释完毕后保存就好了。"),e("br"),s._v("\n参考"),e("a",{attrs:{href:"https://www.cnblogs.com/lfxiao/p/9378763.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("博客园"),e("OutboundLink")],1)]),s._v(" "),e("h3",{attrs:{id:"二、git-push撤回"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、git-push撤回"}},[s._v("#")]),s._v(" 二、git push撤回")]),s._v(" "),e("p",[s._v("此时代码已经push到远程仓库了，如果想撤销也是可以的。")]),s._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"title"}),e("p",[s._v("首先确认你要修改的分支不是被保护的，或者你的权限足够大，否则一通操作后发现没用!!!")])]),e("p",[s._v("正式开始，咱们使用的有两个命令")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --soft\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("前者表示只是改变了HEAD的指向，本地代码不会变化，我们使用git status依然可以看到，同时也可以git commit提交。"),e("br"),s._v("\n后者直接回改变本地源码，不仅仅指向变化了，代码也回到了那个版本时的代码，所以使用是一定要小心，想清楚。"),e("br"),s._v("\n然后再来看回退，如果只是回退到上个版本可以使用")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --soft xx版本号xxx\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard xx版本号xxx\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("也可以使用")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --soft HEAD~1 \n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard HEAD~1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("当执行完上面的命令后，我们就可以做很多操作，比如撤销git add命令：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" --cached\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("至于这个命令可以参考"),e("a",{attrs:{href:"https://broadeno.wordpress.com/2008/10/27/git%E4%BB%A3%E7%A0%81%E5%9C%A8git-add%E4%B9%8B%E5%90%8E%E5%A6%82%E4%BD%95%E5%8F%96%E6%B6%88/",target:"_blank",rel:"noopener noreferrer"}},[s._v("GIT代码在GIT ADD之后如何取消"),e("OutboundLink")],1),e("br"),s._v("\n经过上面操作后，我们本地的代码已经达到我们想要的结果了，这时我们可以进行"),e("code",[s._v("git commit")]),s._v("后，再使用"),e("code",[s._v("git push origin 分支名")]),s._v(" 就可以将新的代码覆盖掉远程仓库版本代码，\n这样子就达到了撤销远程仓库代码一样的效果，但是这时我们可能会报错，因为本地的代码版本低于远程分支的版本，所以要想覆盖掉它，必须使用force")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin 分支 --force\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("但是，如果push的分支是被保护的，我们还是强制推不上的！！！"),e("br"),s._v("\n参考"),e("a",{attrs:{href:"https://blog.csdn.net/guozhaohui628/article/details/78922946",target:"_blank",rel:"noopener noreferrer"}},[s._v("CSDN"),e("OutboundLink")],1)])],1)}),[],!1,null,null,null);t.default=n.exports}}]);