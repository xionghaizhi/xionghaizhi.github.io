(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{537:function(s,a,e){"use strict";e.r(a);var t=e(3),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("Boxx"),s._v(" "),e("p",[e("strong",[s._v("首先排查是否是MySQL时区问题")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("select now();\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查询出的时候与系统本地时间一致，确定不是mysql设置问题，"),e("br"),s._v("\n这时需要看下配置文件中jdbc的参数是否正确，url时间参数改为："),e("code",[s._v("serverTimezone=Asia/Shanghai")]),s._v("或者"),e("code",[s._v("serverTimezone=GMT%2B8")]),e("br"),s._v("\n第二种是在GMT时区上+8小时，因为是url参数"),e("code",[s._v("+")]),s._v("必须要被编码"),e("br"),s._v("\n完整url参数：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("?characterEncoding"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("zeroDateTimeBehavior")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("convertToNull"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("useSSL")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("useJDBCCompliantTimezoneShift")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("useLegacyDatetimeCode")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("serverTimezone")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Asia/Shanghai  \n\n?characterEncoding"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("zeroDateTimeBehavior")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("convertToNull"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("useSSL")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("useJDBCCompliantTimezoneShift")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("useLegacyDatetimeCode")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("serverTimezone")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("GMT%2B8\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("上面两种时区的设置也有所区别，"),e("br"),s._v("\n有国家（包含中国）曾经实行过夏令时（1986-1991），使用Asia/Shanghai时会处理国内的夏令时。使用GMT+8时不会处理夏令时，因为GMT+8不能确定是哪个国家，也就无法使用各个国家规定的夏令时了。\n所以在1986-1991时间段内，使用"),e("code",[s._v("GMT+8")]),s._v("夏天会有一小时时差，而使用"),e("code",[s._v("Asia/Shanghai")]),s._v("就不会出现，所以还是要根据业务来确定使用哪个时区")])],1)}),[],!1,null,null,null);a.default=r.exports}}]);