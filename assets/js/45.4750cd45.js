(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{586:function(n,s,a){"use strict";a.r(s);var t=a(3),e=Object(t.a)({},(function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("Boxx"),n._v(" "),a("p",[n._v('nginx 修改配置文件后，重启的时候出现了，这个提示。 nginx: [error] invalid PID number "" in "/usr/local/nginx/logs/nginx.pid" 。\n意思是说 不能在文件/tmp/nginx.pid中找到有效的 PID(进程ID) 。解决的办法有两种，第一kill掉nginx 主进程，然后启动nginx 。 第二： 把nginx的主进程的pid写入 nginx.pid文件，然后正常的重启。\n'),a("strong",[n._v('nginx: [error] invalid PID number "" in "/usr/local/nginx/logs/nginx.pid"')])]),n._v(" "),a("h2",{attrs:{id:"第一种方法杀掉nginx主进程-然后重启"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一种方法杀掉nginx主进程-然后重启"}},[n._v("#")]),n._v(" 第一种方法杀掉nginx主进程,然后重启")]),n._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 重启前一定要先检查，配置文件是否正确，没有问题再重启")]),n._v("\nnginx -t\nnginx: the configuration "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("file")]),n._v(" /usr/local/nginx/conf/nginx.conf syntax is ok\nnginx: configuration "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("file")]),n._v(" /usr/local/nginx/conf/nginx.conf "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("test")]),n._v(" is successful\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 关掉nginx 的所有进程")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("killall")]),n._v(" nginx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 重新启动 nginx")]),n._v("\nnginx\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br")])]),a("h2",{attrs:{id:"把nginx的进程号重新写入-nginx-pid-中，然后正常重启"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#把nginx的进程号重新写入-nginx-pid-中，然后正常重启"}},[n._v("#")]),n._v(" 把nginx的进程号重新写入 nginx.pid 中，然后正常重启")]),n._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 首先找到nginx进程 pid")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("ps")]),n._v(" aux "),a("span",{pre:!0,attrs:{class:"token operator"}},[n._v("|")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("grep")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[n._v('"nginx: master"')]),n._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[n._v("|")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("grep")]),n._v(" -v pts "),a("span",{pre:!0,attrs:{class:"token operator"}},[n._v("|")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("awk")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[n._v("'{print "),a("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$2")]),n._v(";}'")]),n._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 或者直接写入")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#需要注意的是， nginx.pid 的文件的路径，不同的配置，可能路径是不同的。 可以从 nginx.conf 的主配置文件中获得。")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("echo")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[n._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("ps")]),n._v(" aux "),a("span",{pre:!0,attrs:{class:"token operator"}},[n._v("|")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("grep")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[n._v('"nginx: master"')]),n._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[n._v("|")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("grep")]),n._v(" -v pts "),a("span",{pre:!0,attrs:{class:"token operator"}},[n._v("|")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("awk")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[n._v("'{print "),a("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$2")]),n._v(";}'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[n._v("`")])]),n._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[n._v(">")]),n._v(" /tmp/nginx.pid\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 然后重启")]),n._v("\nnginx -s reload\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br")])]),a("h2",{attrs:{id:"原因"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原因"}},[n._v("#")]),n._v(" 原因")]),n._v(" "),a("p",[n._v("nginx 重启的时候，需要知道，自身的PID是多少，而这个值是写在 nginx.pid 中，如果这个文件的值被修改或者删除，就会出现问题。这个值是可以被修改的，如果把里面的值修改成其他进程的PID,用root账号重启nginx的时候，拥有该PID的进程一样会被kill掉。")])],1)}),[],!1,null,null,null);s.default=e.exports}}]);